(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{5695:(e,s,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}})},6928:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var a=r(5155),t=r(2115),n=r(5695),c=r(6874),i=r.n(c);function l(){let e=(0,n.useParams)().phone,[s,r]=(0,t.useState)(null),[c,l]=(0,t.useState)(!0),[d,o]=(0,t.useState)(null);(0,t.useEffect)(()=>{e&&m()},[e]);let m=async()=>{try{l(!0);let s=await fetch("/api/user/".concat(encodeURIComponent(e))),a=await s.json();a.success?r(a.user):o(a.error||"Error al cargar informaci\xf3n del usuario")}catch(e){o("Error de conexi\xf3n")}finally{l(!1)}},x=e=>new Date(e).toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).replace(/^\w/,e=>e.toUpperCase()),h=e=>{let s=e.replace(/^\+\d+/,"");return 10===s.length?"(".concat(s.slice(0,3),") ").concat(s.slice(3,6),"-").concat(s.slice(6)):e};return c?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Cargando informaci\xf3n del usuario..."})]})}):d||!s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L5.082 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Usuario no encontrado"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:d||"No se pudo cargar la informaci\xf3n del usuario"}),(0,a.jsx)(i(),{href:"/users",className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Volver a Usuarios"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-white",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[(0,a.jsx)("div",{className:"mb-12 pb-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-light text-gray-900 mb-2",children:"Informaci\xf3n de Usuario"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Jorge Minnesota Logistics LLC"})]}),(0,a.jsx)(i(),{href:"/users",className:"text-gray-500 hover:text-gray-700 text-sm",children:"← Volver"})]})}),(0,a.jsxs)("div",{className:"mb-16 font-mono text-sm space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Usuario del Contrato"}),(0,a.jsxs)("div",{children:["Nombre: ",s.full_name]}),(0,a.jsxs)("div",{children:["Tel\xe9fono: ",h(s.phone_number)]}),(0,a.jsxs)("div",{children:["Direcci\xf3n: ",s.address]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Due\xf1o de la Cuenta"}),(0,a.jsxs)("div",{children:["Nombre: ",s.owner_name||"No especificado"]}),(0,a.jsxs)("div",{children:["Tel\xe9fono: ",s.owner_phone?h(s.owner_phone):"No especificado"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Adicional"}),(0,a.jsxs)("div",{children:["Gatepass: ",s.gatepass]}),(0,a.jsxs)("div",{children:["Total Contratos: ",s.contract_count]}),(0,a.jsxs)("div",{children:["Primer Contrato: ",x(s.first_contract).split(",")[0]]})]})]}),(0,a.jsxs)("div",{className:"font-mono text-sm",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:["Historial de Contratos (",s.contracts.length,")"]}),0===s.contracts.length?(0,a.jsx)("div",{className:"text-gray-500",children:"No hay contratos registrados"}):(0,a.jsx)("div",{className:"space-y-4",children:s.contracts.map((e,r)=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{children:["#",r+1," Lote: ",e.lot_number]}),(0,a.jsxs)("div",{className:"text-gray-600",children:["Fecha: ",x(e.timestamp)]}),e.ip_address&&"::1"!==e.ip_address&&(0,a.jsxs)("div",{className:"text-gray-600",children:["IP: ",e.ip_address]}),(0,a.jsx)("div",{children:(0,a.jsx)(i(),{href:"/viaje/".concat(e._id),className:"text-blue-600 hover:text-blue-800 underline",target:"_blank",children:"Ver detalle"})}),r<s.contracts.length-1&&(0,a.jsx)("div",{className:"mt-4 mb-4 border-t border-gray-100"})]},e._id))})]})]})})}},9053:(e,s,r)=>{Promise.resolve().then(r.bind(r,6928))}},e=>{e.O(0,[874,441,964,358],()=>e(e.s=9053)),_N_E=e.O()}]);